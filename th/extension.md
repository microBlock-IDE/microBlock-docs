# ส่วนเสริม

ส่วนเสริม (Extension) คือ การเพิ่มบล็อกที่เดิม microBlock IDE ไม่ได้มีให้ โดยบล็อกที่เพิ่มขึ้นมาจะช่วยให้การพัฒนาโปรแกรมด้วย microBlock สามารถทำได้ง่ายขึ้น และสะดวกมากขึ้น

## สำหรับผู้ใช้

การติดตั้งส่วนเสริมสามารถทำได้โดยกดที่ปุ่มเปิดหน้าต่างส่วนเสริม จากนั้นเลือกส่วนเสริมที่ต้องการติดตั้ง กดปุ่ม Install แล้วรอจนกว่าการติดตั้งจะเสร็จสมบูรณ์

เมื่อติดตั้งเสร็จแล้ว ที่ชื่อส่วนเสริมจะแสดงเครื่องหมายถูกสีเขียวขึ้นมา

ในส่วนของหมวดหมู่บล็อก ก็จะมีหมวดหมู่ใหม่เพิ่มเข้ามาแล้ว สามารถนำบล็อกที่เพิ่มมาในหมวดหมู่ใหม่มาใช้งานได้เลย

## สำหรับนักพัฒนา

ส่วนเสริม (Extension) จะช่วยให้ฮาร์ดแวร์ หรือซอฟแวร์ของท่านสามารถใช้งานกับ microBlock IDE ได้

### โครงสร้างไฟล์ของส่วนเสริม

การพัฒนาส่วนเสริมเริ่มต้นจากการสร้างไฟล์และโฟลเดอร์ตามโครงสร้างต่อไปนี้

  * `blocks` - โฟลเดอร์เก็บไฟล์เกี่ยวกับบล็อก (ในโฟลเดอร์นี้จะต้องมีเฉพาะไฟล์ .js เท่านั้น)
    * `blocks.js` - ไฟล์สำหรับเก็บโค้ดโปรแกรม JavaScript ที่ใช้สร้างบล็อก
    * `generators.js` - ไฟล์สำหรับเก็บโค้ดโปรแกรม JavaScript ที่ใช้แปลงจากบล็อกเป็นโค้ดภาษา Python
  * `module` - โฟลเดอร์เก็บไฟล์โมดูลของ MicroPython (ในโฟลเดอร์นี้จะต้องมีเฉพาะไฟล์ .py หรือ .mpy เท่านั้น)
  * `static` - โฟลเดอร์เก็บไฟล์รูปภาพ
  * `extension.js` - ไฟล์บอกเกี่ยวกับคุณสมบัติของส่วนเสริมนี้ เช่น ชื่อส่วนเสริมนี้ สีประจำของหมวมหมู่นี้ รูปไอค่อน เป็นต้น

โดยไฟล์เหล่านี้จะต้องอัพโหลดขึ้น GitHub เพื่อให้ผู้ใช้ทั่วไปเข้ามาดาวน์โหลดผ่านหน้าต่างติดตั้งส่วนเสริมได้

!>ขนาดไฟล์แต่ละไฟล์ถูกจำกัดไว้ที่ 500kB เนื่องจาก microBlock IDE จะนำไฟล์ของส่วนเสริมทั้งหมดที่ผู้ใช้ติดตั้ง เก็บรวมไว้ไฟล์เดียวตอนบันทึก ดังนั้นหากส่วนเสริมมีขนาดใหญ่ จะทำให้ไฟล์ที่ผู้ใช้บันทึกมีขนาดใหญ่ตามไปด้วย

### การสร้างบล็อก

การสร้างบล็อกแนะนำให้ใช้เครื่องมือที่ชื่อว่า [Blockly Developer Tools]
(https://blockly-demo.appspot.com/static/demos/blockfactory/index.html) เพื่อสร้างบล็อกขึ้นมา หลังจากสร้างบล็อกขึ้นมาแล้ว ให้นำโค้ดจากส่วน Block Definition ไปใส่ในไฟล์ `blocks.js` และนำโค้ดที่ได้จาก Generator stub (อย่าลืมเลือกเป็น Python ก่อน) ไปใส่ในไฟล์ `generators.js` จากนั้นแก้ไขโค้ดโปรแกรม Generator ให้เป็นโค้ดโปรแกรม MicroPython ที่ถูกต้อง

หลังจากสร้างบล็อกและจัดการส่วนแปลงบล็อกเป็นโค้ดแล้ว ขั้นตอนต่อมาคือการเพิ่มรายการบล็อกลงในหมวดหมู่ ซึ่งสามารถได้โดยแก้ไขไฟล์ `extension.js`

### ไฟล์ `extension.js`

ไฟล์ `extension.js` เป็นไฟล์ที่ใช้กำหนดคุณสมบัติและข้อมูลต่าง ๆ เกี่ยวกับส่วนเสริมนี้ ประกอบด้วยออปเจคดังต่อไปนี้

  * `name` - ชื่อของส่วนเสริมนี้ โดยชื่อนี้จะนำไปแสดงเป็นชื่อหมวดหมู่บล็อก และแสดงในหน้าต่างส่วนเสริม
  * `description` - ข้อมูลเบื้องต้นเกี่ยวกับส่วนเสริมนี้ จะถูกนำไปแสดงในหน้าต่างส่วนเสริมเพื่อช่วยให้ผู้ใช้ตัดสินใจดาวน์โหลด
  * `author` - ชื่อผู้พัฒนาส่วนเสริมนี้ ถูกนำไปแสดงในหน้าต่างส่วนเสริม
  * `category` - หมวดหมู่ของส่วนเสริมนี้ สามารถกำหนดได้ดังนี้
    * Display
    * Communication
    * Signal Input/Output
    * Sensors
    * Device Control
    * Timing
    * Data Storage
    * Data Processing
    * Other
  * `version` - เวอร์ชั่นของส่วนเสริมนี้
  * `icon` - ที่อยู่ไอค่อนของส่วนเสริมนี้
  * `color` - สีประจำส่วนเสริมนี้
  * `blocks` - โครงสร้างรายการบล็อกในหมวดหมู่บล็อก

### การเพิ่มรายชื่อส่วนเสริมลง microBlock

ให้คัดลอกลิ้ง GitHub ของส่วนเสริมมา จากนั้นเข้าไปที่ microblock.app กดเปิดหน้าต่างส่วนเสริมขึ้นมา แล้วกดเครื่องหมาย + บริเวณริมขวาบนของหน้าต่าง จากนั้นวางลิ้ง GitHub ของส่วนเสริมลงไป กดปุ่ม Add Extension แล้วรอประมวลผลซักครู เมื่อเสร็จแล้วจะมีข้อความแจ้งบอก

### ติดต่อสอบถาม

หากติดปัญหาการสร้างส่วนเสริมสามารถสอบถามได้ที่ https://github.com/microBlock-IDE/microBlock-IDE/issues
